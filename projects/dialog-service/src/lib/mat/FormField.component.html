<ng-container [formGroup]="form" [ngSwitch]="field.type">
    <!--text field-->
    <mat-form-field *ngSwitchCase="'text'">
        <input matInput [formControlName]="fieldId" [placeholder]="field.title"
               [required]="field.required">
        <mat-error *ngIf="!form.controls[fieldId].valid">
            {{errorMessage(form.controls[fieldId])}}
        </mat-error>
    </mat-form-field>


    <!--password-->
    <mat-form-field *ngSwitchCase="'password'">
        <input matInput type="password" [formControlName]="fieldId" [placeholder]="field.title"
               [required]="field.required">
        <mat-error *ngIf="!form.controls[fieldId].valid">
            {{errorMessage(form.controls[fieldId])}}
        </mat-error>
    </mat-form-field>

    <!--textarea-->
    <mat-form-field *ngSwitchCase="'textarea'">
        <textarea matInput cdkTextareaAutosize [formControlName]="fieldId"
                  [placeholder]="field.title" [required]="field.required">
        </textarea>
        <mat-error *ngIf="!form.controls[fieldId].valid">
            {{errorMessage(form.controls[fieldId])}}
        </mat-error>
    </mat-form-field>

    <!--switch field-->
    <div *ngSwitchCase="'switch'" class="field-separator">
        <mat-slide-toggle [formControlName]="fieldId">{{field.title}}</mat-slide-toggle>
    </div>

    <!--radio field-->
    <mat-radio-group *ngSwitchCase="'radio'" [formControlName]="fieldId"
                     [required]="field.required" class="field-separator">
        <label>{{field.title}}</label>
        <div class="radio-buttons-container">
            <mat-radio-button *ngFor="let option of field.options" [value]="option.value">
                {{option.label}}
            </mat-radio-button>
        </div>
        <mat-error *ngIf="submitted && !form.controls[fieldId].valid">
            {{errorMessage(form.controls[fieldId])}}
        </mat-error>
    </mat-radio-group>

    <!--checkbox-->
    <div *ngSwitchCase="'checkbox'" class="field-separator">
        <label>{{field.title}}</label>
        <div class="checkbox-container" [formArrayName]="fieldId">
            <ng-container *ngFor="let control of getChildControls(fieldId); let i = index">
                <ng-container [formGroupName]="i">
                    <mat-checkbox formControlName="checkboxItem" [value]="getOptionValue(i)">
                        {{getOptionLabel(i)}}
                    </mat-checkbox>
                </ng-container>
            </ng-container>
        </div>
        <mat-error *ngIf="!form.controls[fieldId].valid">
            {{errorMessage(form.controls[fieldId])}}
        </mat-error>
    </div>

    <!--select-->
    <mat-form-field *ngSwitchCase="'select'">
        <mat-select [formControlName]="fieldId" [placeholder]="field.title"
                    [required]="field.required">
            <mat-option *ngFor="let option of field.options" [value]="option.value">
                {{option.label}}
            </mat-option>
        </mat-select>
        <mat-error *ngIf="!form.controls[fieldId].valid">
            {{errorMessage(form.controls[fieldId])}}
        </mat-error>
    </mat-form-field>

    <div *ngSwitchDefault [ngClass]="['field-separator', 'unknown-field-type']">
        Unsupported form field type [{{field.type}}]
    </div>
</ng-container>
